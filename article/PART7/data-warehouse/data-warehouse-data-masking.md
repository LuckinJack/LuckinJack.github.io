

# 什么是数据脱敏

数据脱敏（Data Masking），又称数据漂白、数据去隐私化或数据变形。百度百科对数据脱敏的定义为：指对某些敏感信息通过脱敏规则进行数据的变形，实现敏感隐私数据 的可靠保护。这样，就可以在开发、测试和其它非生产环境以及外包环境中安全地使用脱敏后的真实数据集。

可以看到数据脱敏具有几个关键点：敏感数据、脱敏规则、使用环境。

我们在抹去数据中的敏感内容同时，也需要保持原有的数据特征、业务规则和数据关联性，保证我们在开发、测试以及数据分析类业务不会受到脱敏的影响，使脱敏前后的数据一致性和有效性。

数据脱敏规则在实际应用中往往都是多种方案配合使用，以此来达到更高的安全级别。

数据脱敏又分为 **静态数据脱敏（SDM）**和 **动态数据脱敏（DDM）**。




## 静态数据脱敏

静态数据脱敏（Static data masking）：适用于将数据抽取出生产环境脱敏后分发至测试、开发、培训、数据分析等场景。

出于安全考虑，我们不能将敏感数据存储于非生产环境，此时就要把敏感数据从生产环境脱敏完毕之后再在非生产环境使用。



## 动态数据脱敏

动态数据脱敏（Dynamic data masking）：一般用在生产环境，访问敏感数据时实时进行脱敏，因为有时在不同情况下对于同一敏感数据的读取，需要做不同级别的脱敏处理，例如：不同角色、不同权限所执行的脱敏方案会不同。



# 数据脱敏方案




## 截断隐藏

截断隐藏方案通过舍弃字段必要信息来保证数据的模糊性，使其不再具有利用价值。

> ** [!TIP]**
>
> 比如将手机号用特殊字符 `*` 对真实数值进行遮挡
>
> `13388888888` ->`133****8888`
>
> 比如将身份证号进行截断：
>
> `220888111122226666` -> `220888`



## 随机值

随机值方案是将字母变为随机字母，数字变为随机数字，文字随机替换文字的方式来改变敏感数据。这种方案的优点在于可以在一定程度上保留原有数据的格式。



## 数据替换

数据替换与前边的无效化方式比较相似，这里是用一个设定的虚拟值替换真值，

> ** [!TIP]**
> 比如说我们将手机号统一设置成 `13600000000`。



## 对称加密

对称加密是一种特殊的可逆脱敏方法，通过加密密钥和算法对敏感数据进行加密，密文格式与原始数据在逻辑规则上一致，通过密钥解密可以恢复原始数据，要注意的就是密钥的安全性。

> ** [!TIP]**
> 比如将邮箱号进行加密，去掉邮箱的用户标识名，仅保留邮箱域
>
> `username@163.com` -> `6225888e3a1d4a139f5f5db98d846102b2cd0d@163.com`
>
> 比如将手机号进行加密，去掉其他细节，仅保留运营商和地区信息
>
> `13812345678` -> `13812340000`

## 平均值

平均值方案经常用在统计场景，针对数值型数据，我们先计算它们的均值，然后使脱敏后的值在均值附近随机分布，从而保持数据的总和不变。

> ** [!TIP]**
> 比如说我们将 薪资列 的值求和做平均后再放回去

## 偏移和取整

偏移和取整方案比之前几种方案更接近真实数据，在大数据分析场景中意义比较大。这种方式通过随机移位改变数字数据，偏移取整在保持了数据的安全性的同时保证了范围的大致真实性。

> ** [!TIP]**
> 比如日期时间字段，`2022-11-08 10:12:25` 变为 `2020-01-02 15:00:00`

## 乱序处理

乱序处理方案不改变数据的数值，但是将业务中的数据产生主体的顺序打乱。

> ** [!TIP]**
> 比如在一个业务表中，将相同城市下不同客户与月消费金额的对应关系打乱
>
> `city1:userA:¥6000,city1:userB:¥250000,city2:userC:¥3`
>
>  ↓
>
> `city1:userA:250000,city1:userB:¥6000,city2:userC:¥3`





# 参考

[大数据隐私保护关键技术解析：数据脱敏、匿名化、差分隐私和同态加密](https://www.secrss.com/articles/13856)

[[Apache ShardingSphere数据脱敏全解决方案详解](https://my.oschina.net/u/3867294/blog/3089014)

